$('#error_expl').remove();
$('.main-notice').hide();

<% if flash.any? %>
  $(".logo-container").after('<%= escape_javascript( bootstrap_flash(class: "main-notice") ) %>');
<% end %>

<% if @link.errors.any? %>
  $(".welcome-form").prepend('<%= escape_javascript(render("shared/error_messages", formats: [:html], object: @link )) %>');
  $('#error_expl').effect("highlight");
<% else %>
  
  setTimeout(function(){
    $('.main-notice').slideUp();
  }, 10000);
  
  $('.input-group-create, .input-group-copy').toggle();
  link_field = $('#shortened_url');
  link_field.val("<%= base_url(@link.short_url) %>").attr("disabled", true);


  <% if @links.include?(@link) %>
    $('.link-table tbody').html("<%= escape_javascript render(@links) %>");
    link_row = $(".link-table").find("[data-row-id='" + <%= @link.id %> + "']");
    $(link_row).effect("highlight", 1500); 
  <% end %>
  
<% end %>